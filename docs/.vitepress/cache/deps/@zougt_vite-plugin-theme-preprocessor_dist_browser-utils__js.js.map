{
  "version": 3,
  "sources": ["../../../../node_modules/.pnpm/@zougt+vite-plugin-theme-preprocessor@1.4.8/node_modules/@zougt/vite-plugin-theme-preprocessor/dist/toBrowerEnvs.js", "../../../../node_modules/.pnpm/@zougt+vite-plugin-theme-preprocessor@1.4.8/node_modules/@zougt/vite-plugin-theme-preprocessor/dist/browser-utils.js"],
  "sourcesContent": ["export const browerPreprocessorOptions = {\"outputDir\":\"\",\"defaultScopeName\":\"task-theme-default\",\"includeStyleWithColors\":[],\"extract\":false,\"themeLinkTagId\":\"theme-link-tag\",\"themeLinkTagInjectTo\":\"head\",\"removeCssScopeName\":false,\"customThemeCssFileName\":null,\"arbitraryMode\":false,\"defaultPrimaryColor\":\"\",\"customThemeOutputPath\":\"/Users/mawenqing/Documents/xfw/pu-ui/node_modules/.pnpm/@zougt+vite-plugin-theme-preprocessor@1.4.8/node_modules/@zougt/vite-plugin-theme-preprocessor/setCustomTheme.js\",\"styleTagId\":\"custom-theme-tagid\",\"InjectDefaultStyleTagToHtml\":true,\"hueDiffControls\":{\"low\":0,\"high\":0},\"multipleScopeVars\":[{\"scopeName\":\"task-theme-default\",\"path\":\"/Users/mawenqing/Documents/xfw/pu-ui/packages/assets/style/variables.less\",\"includeStyles\":{\".ant-btn-link:hover, .ant-btn-link:focus\":{\"border-color\":\"transparent\"},\".ant-btn-link\":{\"background\":\"transparent\"},\".ant-btn-primary:hover\":{\"color\":\"#ffffff\"},\".ant-checkbox-disabled .ant-checkbox-inner\":{\"background-color\":\"#f5f5f5\"},\".ant-checkbox-checked\":{\"color\":\"@primary-color\"}}},{\"scopeName\":\"task-theme-integration\",\"path\":\"/Users/mawenqing/Documents/xfw/pu-ui/packages/assets/style/variablesInte.less\",\"includeStyles\":{\".ant-btn-link:hover, .ant-btn-link:focus\":{\"border-color\":\"transparent\"},\".ant-btn-link\":{\"background\":\"transparent\"},\".ant-btn-primary:hover\":{\"color\":\"#ffffff\"},\".ant-checkbox-disabled .ant-checkbox-inner\":{\"background-color\":\"#f5f5f5\"},\".ant-checkbox-checked\":{\"color\":\"@primary-color\"}}},{\"scopeName\":\"task-theme-okr\",\"path\":\"/Users/mawenqing/Documents/xfw/pu-ui/packages/assets/style/OKRvariables.less\",\"includeStyles\":{\".ant-btn-link:hover, .ant-btn-link:focus\":{\"border-color\":\"transparent\"},\".ant-btn-link\":{\"background\":\"transparent\"},\".ant-btn-primary:hover\":{\"color\":\"#ffffff\"},\".ant-checkbox-disabled .ant-checkbox-inner\":{\"background-color\":\"#f5f5f5\"},\".ant-checkbox-checked\":{\"color\":\"@primary-color\"}}}]};\nexport const basePath=\"/\";\nexport const assetsDir=\"assets\";\nexport const buildCommand=\"build\";\n        ", "/* eslint-disable global-require */\n/* eslint-disable import/extensions */\n/* eslint-disable import/no-unresolved */\n/* eslint-env browser */\nimport {\n  basePath,\n  assetsDir,\n  buildCommand,\n  browerPreprocessorOptions,\n} from \"./toBrowerEnvs\";\n\nfunction getRegstr(scopeName) {\n  return `(^${scopeName}\\\\s+|\\\\s+${scopeName}\\\\s+|\\\\s+${scopeName}$|^${scopeName}$)`;\n}\nexport function addClassNameToHtmlTag({ scopeName, multipleScopeVars }) {\n  const $multipleScopeVars =\n    Array.isArray(multipleScopeVars) && multipleScopeVars.length\n      ? multipleScopeVars\n      : browerPreprocessorOptions.multipleScopeVars;\n\n  let currentClassName = document.documentElement.className;\n\n  if (new RegExp(getRegstr(scopeName)).test(currentClassName)) {\n    return;\n  }\n  $multipleScopeVars.forEach((item) => {\n    currentClassName = currentClassName.replace(\n      new RegExp(getRegstr(item.scopeName), \"g\"),\n      ` ${scopeName} `\n    );\n  });\n  document.documentElement.className = currentClassName.replace(\n    /(^\\s+|\\s+$)/g,\n    \"\"\n  );\n}\nfunction createThemeLinkTag({ id, href }) {\n  // 不存在的话，则新建一个\n  const styleLink = document.createElement(\"link\");\n  styleLink.rel = \"stylesheet\";\n  styleLink.href = href;\n  styleLink.id = id;\n  return styleLink;\n}\n/**\n *\n * @param {object} opts\n * @param {string} opts.scopeName\n * @returns\n */\nexport function toggleTheme(opts) {\n  const options = {\n    // multipleScopeVars: [],\n    scopeName: \"theme-default\",\n    customLinkHref: (href) => href,\n    // themeLinkTagId: \"theme-link-tag\",\n    // \"head\" || \"body\"\n    // themeLinkTagInjectTo: \"head\",\n    ...opts,\n  };\n\n  if (buildCommand !== \"build\" || !browerPreprocessorOptions.extract) {\n    addClassNameToHtmlTag(options);\n    return;\n  }\n  const linkId =\n    options.themeLinkTagId || browerPreprocessorOptions.themeLinkTagId;\n  let styleLink = document.getElementById(linkId);\n  const href = options.customLinkHref(\n    `${(basePath || \"\").replace(/\\/$/, \"\")}${`/${\n      browerPreprocessorOptions.outputDir || assetsDir || \"\"\n    }/${options.scopeName}.css`.replace(/\\/+(?=\\/)/g, \"\")}`\n  );\n  if (styleLink) {\n    // 假如存在id为theme-link-tag 的link标签，创建一个新的添加上去加载完成后再60毫秒后移除旧的\n    styleLink.id = `${linkId}_old`;\n    const newLink = createThemeLinkTag({ id: linkId, href });\n    if (styleLink.nextSibling) {\n      styleLink.parentNode.insertBefore(newLink, styleLink.nextSibling);\n    } else {\n      styleLink.parentNode.appendChild(newLink);\n    }\n    newLink.onload = () => {\n      setTimeout(() => {\n        styleLink.parentNode.removeChild(styleLink);\n        styleLink = null;\n      }, 60);\n      // 注：如果是removeCssScopeName:true移除了主题文件的权重类名，就可以不用修改className 操作\n      if (!browerPreprocessorOptions.removeCssScopeName) {\n        addClassNameToHtmlTag(options);\n      }\n    };\n    return;\n  }\n  // 不存在的话，则新建一个\n  styleLink = createThemeLinkTag({ id: linkId, href });\n  // 注：如果是removeCssScopeName:true移除了主题文件的权重类名，就可以不用修改className 操作\n  if (!browerPreprocessorOptions.removeCssScopeName) {\n    addClassNameToHtmlTag(options);\n  }\n  document[\n    (\n      options.themeLinkTagInjectTo ||\n      browerPreprocessorOptions.themeLinkTagInjectTo ||\n      \"\"\n    ).replace(\"-prepend\", \"\")\n  ].appendChild(styleLink);\n}\n\nexport default {\n  toggleTheme,\n  addClassNameToHtmlTag,\n};\n"],
  "mappings": "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",
  "names": ["href"]
}
